using StatsBase, DataFrames, Plots, Base.Threads, GLM, PrettyTables

function main()
  dados = [83.345, 149.7039, 212.4493, 274.1174, 333.514, 392.5568, 451.3605, 508.1842, 565.4509, 620.8574, 676.6977, 731.7828, 786.5903, 841.9073, 896.9016, 952.1715, 1005.7189, 1058.9043, 1112.3349, 1164.9639, 1218.5704, 1272.5988, 1324.9658, 1378.6399, 1430.0697, 1479.9724, 1535.9572, 1587.2, 1639.2722, 1690.1023, 1743.0888, 1795.4474, 1844.0129, 1898.3758, 1949.264, 1999.9768, 2052.0106, 2098.153, 2152.5458, 2206.2749, 2253.5349, 2302.8975, 2356.2102, 2406.0278, 2457.1102, 2507.3131, 2555.4361, 2607.7202, 2658.0391, 2707.2283, 2756.5901, 2802.3186, 2854.7784, 2906.4119, 2954.5327, 3004.578, 3053.729, 3100.3084, 3155.9496, 3203.9969, 3256.8498, 3305.5448, 3352.1946, 3407.3857, 3445.5771, 3503.1336, 3548.8787, 3599.0256, 3644.095, 3704.5595, 3740.8627, 3797.323, 3848.1752, 3892.0169, 3941.5883, 3989.2989, 4041.808, 4090.597, 4132.6085, 4189.6942, 4228.5379, 4286.8144, 4340.5821, 4378.0829, 4434.7762, 4478.4086, 4525.0139, 4570.5159, 4617.4927, 4673.4852, 4715.7859, 4765.236, 4819.4451, 4859.3224, 4913.5353, 4960.6158, 5008.6877, 5059.2798, 5104.6287, 5157.1512, 5197.35, 5248.7563, 5294.2078, 5343.874, 5398.8421, 5441.6085, 5491.8386, 5534.2989, 5587.9683, 5628.8106, 5677.8941, 5725.2875, 5769.6536, 5822.2535, 5867.3448, 5920.1222, 5965.3134, 6004.6151, 6057.5648, 6105.8364, 6154.3668, 6201.4089, 6260.7568, 6293.5651, 6339.0761, 6386.9929, 6432.5455, 6486.9941, 6533.6305, 6576.1186, 6621.9936, 6670.6185, 6720.5418, 6772.7702, 6815.4187, 6861.3649, 6900.1651, 6949.6443, 7001.7534, 7052.8592, 7101.236, 7139.0751, 7191.6663, 7241.5977, 7284.7651, 7335.1584, 7389.1732, 7423.6196, 7464.4864, 7521.7788, 7570.7876, 7616.3753, 7659.8743, 7706.1154, 7741.9662, 7798.3987, 7839.1607, 7893.721, 7937.6549, 7983.4552, 8027.063, 8079.5832, 8133.7354, 8163.5931, 8219.305, 8268.2763, 8305.7423, 8341.3202, 8412.9822, 8457.8782, 8494.2831, 8539.6082, 8591.741, 8624.3682, 8683.6657, 8727.0207, 8769.1328, 8820.0888, 8871.5677, 8914.446, 8963.0678, 9002.5076, 9052.5867, 9101.8178, 9137.5173, 9198.511, 9240.901, 9279.051, 9330.0826, 9381.0205, 9437.6995, 9465.7047, 9507.1286, 9562.6016, 9607.8519, 9652.7248, 9706.5055, 9737.801, 9786.9234, 9827.5022, 9883.0376, 9914.3055, 9973.8597, 10018.0132, 10075.0061, 10102.5998, 10150.5514, 10213.5314, 10254.4358, 10288.5909, 10349.2173, 10392.662, 10425.8553, 10479.7706, 10508.9071, 10564.3768, 10627.1372, 10661.7026, 10695.9412, 10757.5811, 10799.7979, 10847.8123, 10900.2884, 10933.9221, 10970.1262, 11023.781, 11085.5035, 11131.3651, 11155.9875, 11205.823, 11261.8274, 11305.3173, 11343.2048, 11367.5207, 11442.4967, 11480.5188, 11529.9458, 11562.6966, 11622.6129, 11663.7792, 11693.9855, 11769.9179, 11805.6602, 11848.0437, 11895.622, 11939.0577, 11985.8326, 12024.9598, 12073.6384, 12125.5142]

  t = length(dados)
  dfdados = DataFrame(dimensoes=1:t, estimativa=dados)
  dfbetas = DataFrame(dimensoes=Int[], β0=Float64[], β1=Float64[])

  for n in 1:t
    analise = dfdados[1:n, :]
    modelo = lm(@formula(estimativa ~ dimensoes), analise)
    coeficientes = coef(modelo)
    push!(dfbetas, [n, coeficientes[1], coeficientes[2]])
  end
  return dfbetas
end

main()
